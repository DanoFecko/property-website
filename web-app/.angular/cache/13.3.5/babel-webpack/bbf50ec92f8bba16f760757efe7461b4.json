{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { FormControl, Validators } from '@angular/forms';\nimport { FormGroup } from '@angular/forms';\nlet CreatePropertyComponent = class CreatePropertyComponent {\n  constructor(propertyService, route) {\n    this.propertyService = propertyService;\n    this.route = route;\n    this.mode = '';\n    this.loading = false;\n  }\n\n  ngOnInit() {\n    this.form = new FormGroup({\n      location: new FormControl(null, {\n        validators: [Validators.required, Validators.minLength(1)]\n      }),\n      size: new FormControl(null, {\n        validators: [Validators.required, Validators.minLength(1)]\n      }),\n      price: new FormControl(null, {\n        validators: [Validators.required, Validators.minLength(1)]\n      })\n    });\n    this.route.paramMap.subscribe(paramMap => {\n      if (paramMap.has('propertyId')) {\n        this.loading = true;\n        this.mode = 'edit';\n        this.propertyId = paramMap.get('propertyId');\n\n        if (this.propertyId) {\n          this.propertyService.getProperty(this.propertyId).subscribe(data => {\n            this.loading = false;\n            this.property = data.property;\n            this.form.setValue({\n              location: this.property.location,\n              price: this.property.price,\n              size: this.property.size\n            });\n          });\n        }\n      } else {\n        this.mode = 'create';\n        this.property = {\n          _id: '',\n          size: null,\n          price: null,\n          location: null,\n          type: null,\n          status: true,\n          owner: 'admin',\n          pictures: []\n        };\n      }\n    });\n  }\n\n  onAddProperty() {\n    if (this.form.invalid) {\n      return;\n    }\n\n    this.loading = true;\n\n    if (this.mode === 'edit') {\n      this.property.location = this.form.value.location;\n      this.property.size = this.form.value.size;\n      this.property.price = this.form.value.price;\n      this.propertyService.updateProperty(this.property);\n    } else {\n      const property = {\n        _id: '',\n        size: this.form.value.size,\n        price: this.form.value.price,\n        location: this.form.value.location,\n        type: this.form.value.type,\n        status: true,\n        owner: 'admin',\n        pictures: []\n      };\n      this.propertyService.addProperty(property);\n    }\n\n    this.form.reset();\n  }\n\n};\nCreatePropertyComponent = __decorate([Component({\n  selector: 'app-create-property',\n  templateUrl: './create-property.component.html',\n  styleUrls: ['./create-property.component.sass']\n})], CreatePropertyComponent);\nexport { CreatePropertyComponent };","map":null,"metadata":{},"sourceType":"module"}